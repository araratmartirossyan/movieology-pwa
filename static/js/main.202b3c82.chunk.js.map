{"version":3,"sources":["utils/request.js","services/movieService.js","services/userService.js","services/vkService.js","utils/prefetchData.js","utils/urlParams.js","components/WhatToWatch/WhatToWatch.jsx","pages/Home/Home.js","pages/Movie/Movie.js","App.js","serviceWorker.js","index.js"],"names":["urls","movies","api","omdb","request","method","url","endpoint","a","params","computedUrl","axios","data","MovieService","movieId","userId","localStorage","getItem","profile","movie","like","setItem","_id","favId","fav","id","propOr","head","isEmpty","favs","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","fireAuth","auth","googleAuthProvider","GoogleAuthProvider","UserService","signInWithPopup","user","googleProfile","additionalUserInfo","this","obtainProfile","name","family_name","picture","getProfile","userProfile","first_name","last_name","photo_max_orig","createdUser","signOut","signedOut","removeItem","connect","subscribe","VkService","send","link","movieService","userService","vkService","googleAuth","fetchUserProfile","fetchMovies","handleLike","checkIsFav","isFav","showImage","img","handleUnLike","unlike","result","onMovieShare","handleFetchMovie","fetchMovie","isFavorite","getObjectUrlString","urlString","search","window","location","hash","replace","split","reduce","prev","curr","key","value","decodeURIComponent","WhatToWatchButton","onFindMovie","loaded","useState","loading","state","setState","className","cx","activate","done","onClick","xlinkHref","xmlns","style","display","viewBox","cy","r","d","Home","MovieView","Title","Poster","Plot","Actors","Rated","Runtime","Genre","imdbRating","goBack","onLike","onUnLike","backgroundImage","backgroundSize","width","height","color","renderButtons","size","level","authTypes","google","fb","App","isAuthorized","activeView","setMovieOnInit","fetchedMovie","handleAuth","type","handleFindMovie","randomMovieId","Math","floor","random","length","randomMovie","setTimeout","likeHandler","view","header","activePanel","stretched","aria-label","role","mode","marginRight","backgroundColor","React","Component","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","error","ReactDOM","render","document","getElementById","URL","process","href","origin","addEventListener","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.202b3c82.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst urls = {\n  movies: \"https://api.themoviedb.org\",\n  api: \"https://movie.incodewetrust.dev\",\n  omdb: \"https://www.omdbapi.com\"\n};\n\n// http://www.omdbapi.com/?i=tt3896198&apikey=f5f111a3\n\n// const API_KEY = \"ca7b0635ffccf1dfb0cd5e2673609810\";\nconst API_KEY = \"f5f111a3\";\nexport const request = async (method, url, endpoint, params = {}) => {\n  try {\n    const computedUrl = endpoint === \"omdb\" ? `${url}&apikey=${API_KEY}` : url;\n    const { data } = await axios({\n      url: `${urls[endpoint]}/${computedUrl}`,\n      method,\n      data: params\n    });\n    return data;\n  } catch (err) {\n    return err;\n  }\n};\n","import { request } from \"./../utils/request\";\nimport { propOr, head, isEmpty } from \"ramda\";\n\nexport default class MovieService {\n  async fetchMovie(movieId) {\n    try {\n      const data = await request(\"get\", `movies/${movieId}`, \"api\");\n      return data;\n    } catch (err) {\n      throw err;\n    }\n  }\n\n  async fetchMovies() {\n    try {\n      const data = await request(\"get\", \"movies\", \"api\", {});\n      return data;\n    } catch (err) {\n      throw err;\n    }\n  }\n\n  async like(movieId) {\n    try {\n      const userId = localStorage.getItem(\"userId\");\n      const like = await request(\"post\", \"favorites\", \"api\", {\n        profile: userId,\n        movie: movieId\n      });\n      localStorage.setItem(\"favId\", like._id);\n      return like;\n    } catch (err) {\n      throw err;\n    }\n  }\n\n  async unlike() {\n    try {\n      const favId = localStorage.getItem(\"favId\");\n      const like = await request(\"delete\", `favorites/${favId}`, \"api\");\n      return like;\n    } catch (err) {\n      throw err;\n    }\n  }\n\n  async checkIsFav(movieId) {\n    try {\n      const userId = localStorage.getItem([\"userId\"]);\n      const fav = await request(\n        \"get\",\n        `favorites?movie=${movieId}&profile=${userId}`,\n        \"api\"\n      );\n      const id = propOr(null, \"id\")(head(fav));\n      localStorage.setItem(\"favId\", id);\n      return !isEmpty(fav);\n    } catch (err) {\n      return false;\n    }\n  }\n\n  async fetchFavs(userId) {\n    try {\n      const favs = await request(\"get\", `favorites?profile=${userId}`, \"api\");\n      return favs;\n    } catch (error) {\n      throw error;\n    }\n  }\n}\n","import { request } from \"./../utils/request\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyACa906cLsAcOp6Wk8Jthp457--ietT9PI\",\n  authDomain: \"movieology-15eab.firebaseapp.com\",\n  databaseURL: \"https://movieology-15eab.firebaseio.com\",\n  projectId: \"movieology-15eab\",\n  storageBucket: \"movieology-15eab.appspot.com\",\n  messagingSenderId: \"417357365093\",\n  appId: \"1:417357365093:web:7ad260dfa52275f25a2b8c\"\n};\nfirebase.initializeApp(firebaseConfig);\n\n/* firebase authentication methods */\nexport const fireAuth = firebase.auth();\n\nconst googleAuthProvider = new firebase.auth.GoogleAuthProvider();\n\nexport default class UserService {\n  async googleAuth() {\n    const user = await fireAuth.signInWithPopup(googleAuthProvider);\n    const googleProfile = user.additionalUserInfo.profile;\n    this.obtainProfile(googleProfile);\n    return user;\n  }\n\n  async obtainProfile({ id, name, family_name, picture }) {\n    const profile = await this.getProfile(id);\n    if (profile) {\n      return profile;\n    }\n    const userProfile = {\n      userId: id,\n      first_name: name,\n      last_name: family_name,\n      photo_max_orig: picture\n    };\n\n    const createdUser = await request(\"post\", \"profiles\", \"api\", userProfile);\n    localStorage.setItem(\"userId\", id);\n    return createdUser;\n  }\n\n  async signOut() {\n    const signedOut = await fireAuth.signOut();\n    localStorage.removeItem(\"accessToken\");\n    localStorage.removeItem(\"uid\");\n    return signedOut;\n  }\n\n  async getProfile(userId) {\n    const [profile = null] = await request(\n      \"get\",\n      `profiles/?userId=${userId}`,\n      \"api\"\n    );\n    if (profile) {\n      localStorage.setItem(\"userId\", profile.id);\n      return profile;\n    }\n    return null;\n  }\n\n  showImage(url) {}\n}\n","import connect from \"@vkontakte/vk-connect\";\nconnect.subscribe(() => {});\n\nexport default class VkService {\n  onMovieShare(movieId) {\n    connect.send(\"VKWebAppShare\", {\n      link: `https://vk.com/app7273858#movieId=${movieId}&view=movie`\n    });\n  }\n}\n","// Api Calls\nimport MovieService from \"../services/movieService\";\nimport UserService from \"../services/userService\";\nimport VkService from \"../services/vkService\";\n\nconst movieService = new MovieService();\nconst userService = new UserService();\nconst vkService = new VkService();\n\nexport const googleAuth = async () => {\n  const user = await userService.googleAuth();\n  return {\n    user\n  };\n};\n\nexport const fetchUserProfile = async () => {\n  try {\n    const userId = localStorage.getItem(\"userId\");\n    const userProfile = await userService.getProfile(userId);\n    return userProfile;\n  } catch (err) {\n    throw err;\n  }\n};\n\nexport const fetchMovies = async () => {\n  try {\n    const movies = await movieService.fetchMovies();\n    return movies;\n  } catch (err) {\n    throw err;\n  }\n};\n\nexport const handleLike = async movieId => {\n  try {\n    const like = await movieService.like(movieId);\n    return like;\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const checkIsFav = async movieId => {\n  try {\n    const isFav = await movieService.checkIsFav(movieId);\n    return isFav;\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const showImage = img => userService.showImage(img);\n\nexport const handleUnLike = async () => {\n  try {\n    const result = await movieService.unlike();\n    return result;\n  } catch (err) {\n    throw err;\n  }\n};\n\nexport const onMovieShare = movieId => vkService.onMovieShare(movieId);\n\nexport const handleFetchMovie = async movieId => {\n  try {\n    const movie = await movieService.fetchMovie(movieId);\n    const isFavorite = await movieService.checkIsFav(movieId);\n    return {\n      ...movie,\n      isFavorite\n    };\n  } catch (err) {\n    throw err;\n  }\n};\n","const getLocationHash = () => window.location.hash.replace(\"#\", \"\");\n\nexport const getObjectUrlString = urlString => {\n  const search = getLocationHash(urlString);\n  const objectUrl =\n    search === \"\"\n      ? {}\n      : search.split(\"&\").reduce((prev, curr) => {\n          const [key, value] = curr.split(\"=\");\n          prev[decodeURIComponent(key)] = decodeURIComponent(value);\n          return prev;\n        }, {});\n  return objectUrl;\n};\n","import React, { useState } from \"react\";\nimport cx from \"classnames\";\nimport \"./WhatToWatch.css\";\n\nconst WhatToWatchButton = ({ onFindMovie, loaded }) => {\n  const [state, setState] = useState({\n    loading: false\n  });\n\n  const animate = () => {\n    setState({\n      loading: true\n    });\n    onFindMovie();\n  };\n\n  return (\n    <div className=\"movie-block\">\n      <div className=\"movie-button\">\n        <button\n          className={cx({\n            activate: true,\n            loading: state.loading,\n            done: loaded\n          })}\n          onClick={animate}\n        >\n          <span>\n            <svg>\n              <use xlinkHref=\"#circle\" />\n            </svg>\n            <svg>\n              <use xlinkHref=\"#arrow\" />\n            </svg>\n            <svg>\n              <use xlinkHref=\"#check\" />\n            </svg>\n          </span>\n          <ul>\n            <li>Посоветуй</li>\n            <li>Думаю</li>\n            <li>Нашел</li>\n          </ul>\n        </button>\n\n        <svg xmlns=\"http://www.w3.org/2000/svg\" style={{ display: \"none\" }}>\n          <symbol\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            id=\"circle\"\n          >\n            <circle cx=\"8\" cy=\"8\" r=\"7.5\" />\n          </symbol>\n          <symbol\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 12 12\"\n            id=\"arrow\"\n          >\n            <path d=\"M2.7008908,5.37931459 L2.7008908,5.37931459 C2.9224607,5.60207651 3.2826628,5.60304283 3.50542472,5.38147293 C3.52232305,5.36466502 3.53814843,5.34681177 3.55280728,5.32801875 L5.34805194,3.02646954 L5.34805194,10.3480519 C5.34805194,10.7081129 5.63993903,11 6,11 L6,11 C6.36006097,11 6.65194806,10.7081129 6.65194806,10.3480519 L6.65194806,3.02646954 L8.44719272,5.32801875 C8.6404327,5.57575732 8.99791646,5.61993715 9.24565503,5.42669716 C9.26444805,5.41203831 9.28230129,5.39621293 9.2991092,5.37931459 L9.2991092,5.37931459 C9.55605877,5.12098268 9.57132199,4.70855346 9.33416991,4.43193577 L6.75918715,1.42843795 C6.39972025,1.00915046 5.76841509,0.960656296 5.34912761,1.32012319 C5.31030645,1.35340566 5.27409532,1.38961679 5.24081285,1.42843795 L2.66583009,4.43193577 C2.42867801,4.70855346 2.44394123,5.12098268 2.7008908,5.37931459 Z\" />\n          </symbol>\n          <symbol\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 12 12\"\n            id=\"check\"\n          >\n            <path\n              id=\"test\"\n              d=\"M4.76499011,6.7673683 L8.2641848,3.26100386 C8.61147835,2.91299871 9.15190114,2.91299871 9.49919469,3.26100386 C9.51164115,3.27347582 9.52370806,3.28637357 9.53537662,3.29967699 C9.83511755,3.64141434 9.81891834,4.17816549 9.49919469,4.49854425 L5.18121271,8.82537365 C4.94885368,9.05820878 4.58112654,9.05820878 4.34876751,8.82537365 L2.50080531,6.97362503 C2.48835885,6.96115307 2.47629194,6.94825532 2.46462338,6.93495189 C2.16488245,6.59321455 2.18108166,6.0564634 2.50080531,5.73608464 C2.84809886,5.3880795 3.38852165,5.3880795 3.7358152,5.73608464 L4.76499011,6.7673683 Z\"\n            />\n          </symbol>\n        </svg>\n      </div>\n    </div>\n  );\n};\n\nexport default WhatToWatchButton;\n","import React from \"react\";\nimport WhatToWatch from \"../../components/WhatToWatch/WhatToWatch\";\nimport \"./Home.css\";\n\nconst Home = ({ onFindMovie, loaded }) => (\n  <div className=\"welcome_panel\">\n    <WhatToWatch onFindMovie={onFindMovie} loaded={loaded} />\n  </div>\n);\n\nexport default Home;\n","import React from \"react\";\nimport { Button } from \"@vkontakte/vkui\";\nimport Icon24ShareExternal from \"@vkontakte/icons/dist/24/share_external\";\nimport Icon16LikeOutline from \"@vkontakte/icons/dist/16/like_outline\";\nimport Icon16Like from \"@vkontakte/icons/dist/16/like\";\nimport Icon28FavoriteOutline from \"@vkontakte/icons/dist/28/favorite_outline\";\n\nimport \"./Movie.css\";\n\nconst renderButtons = ({ isFavorite, onUnLike, onLike, _id, onMovieShare }) => (\n  <div className=\"mr-grid action-row\">\n    <div className=\"col6 action-btn\">\n      {!isFavorite ? (\n        <Icon16LikeOutline\n          width={30}\n          height={30}\n          style={{ color: \"#fe4141\" }}\n          onClick={() => onLike(_id)}\n        />\n      ) : (\n        <Icon16Like\n          width={30}\n          height={30}\n          style={{ color: \"#fe4141\" }}\n          onClick={() => onUnLike(_id)}\n        />\n      )}\n      ;\n    </div>\n\n    <div className=\"col6 action-btn\">\n      <Icon24ShareExternal\n        width={30}\n        height={30}\n        style={{ color: \"#fe4141\" }}\n        onClick={() => onMovieShare(_id)}\n      />\n    </div>\n  </div>\n);\n\nconst MovieView = ({\n  movie: {\n    Title,\n    Poster,\n    Plot,\n    Actors,\n    Rated,\n    Runtime,\n    Genre,\n    imdbRating,\n    isFavorite,\n    _id\n  },\n  goBack,\n  onLike,\n  showImage,\n  onUnLike,\n  onMovieShare\n}) => {\n  const userId = localStorage.getItem(\"userId\");\n\n  return (\n    <div className=\"wrap\">\n      <div className=\"cellphone-container\">\n        <div className=\"movie\">\n          <div\n            onClick={() => showImage(Poster)}\n            className=\"movie-img\"\n            style={{\n              backgroundImage: `url(${Poster})`,\n              backgroundSize: \"cover\"\n            }}\n          ></div>\n          <div className=\"text-movie-cont\">\n            <div className=\"mr-grid\">\n              <div className=\"col1\">\n                <h2 className=\"title\">{Title}</h2>\n                <ul className=\"movie-gen\">\n                  <li>{Rated} /</li>\n                  <li>{Runtime} /</li>\n                  <li>{Genre}</li>\n                </ul>\n              </div>\n            </div>\n            <div className=\"mr-grid summary-row\">\n              <div className=\"col2\">\n                <h3>Описание:</h3>\n              </div>\n              <div className=\"col2\">\n                <div className=\"movie-likes\">\n                  <Icon28FavoriteOutline width={20} height={20} />\n                  <span>{imdbRating}</span>\n                </div>\n              </div>\n            </div>\n            <div className=\"mr-grid\">\n              <div className=\"col1\">\n                <p className=\"movie-description\">{Plot}</p>\n              </div>\n            </div>\n            <div className=\"mr-grid actors-row\">\n              <div className=\"col1\">\n                <p className=\"movie-actors\">{Actors.split(\"...\")[0]}</p>\n              </div>\n            </div>\n            {userId &&\n              renderButtons({\n                isFavorite,\n                onLike,\n                onUnLike,\n                _id,\n                onMovieShare\n              })}\n\n            <div className=\"back-btn\">\n              <Button size=\"xl\" level=\"outline\" onClick={goBack}>\n                Назад\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MovieView;\n","import React from \"react\";\nimport { View, Root, Panel, Button, Div } from \"@vkontakte/vkui\";\nimport {\n  handleLike,\n  fetchMovies,\n  checkIsFav,\n  showImage,\n  handleUnLike,\n  onMovieShare,\n  handleFetchMovie,\n  googleAuth,\n  fetchUserProfile\n} from \"./utils/prefetchData\";\n\nimport { getObjectUrlString } from \"./utils/urlParams\";\nimport Icon24LogoInstagram from \"@vkontakte/icons/dist/24/logo_instagram\";\nimport Icon24LogoGoogle from \"@vkontakte/icons/dist/24/logo_google\";\n\nimport Home from \"./pages/Home/Home\";\nimport MovieCard from \"./pages/Movie/Movie\";\n\nimport \"@vkontakte/vkui/dist/vkui.css\";\nimport \"./styles/global.css\";\n\nconst authTypes = {\n  google: googleAuth,\n  fb: googleAuth\n};\n\nexport default class App extends React.Component {\n  state = {\n    isAuthorized: true,\n    user: {},\n    loaded: false,\n    activeView: \"welcome\",\n    movie: {}\n  };\n\n  async componentDidMount() {\n    const { view = \"welcome\", movieId = null } = getObjectUrlString();\n    const userId = localStorage.getItem(\"userId\");\n\n    if (userId) {\n      const user = await fetchUserProfile();\n      this.setState({ isAuthorized: true, user });\n    } else {\n      this.setState({ isAuthorized: false });\n    }\n\n    if (movieId) {\n      this.setState({\n        activeView: view\n      });\n      this.setMovieOnInit(movieId);\n    }\n  }\n\n  setMovieOnInit = async movieId => {\n    try {\n      const fetchedMovie = await handleFetchMovie(movieId);\n      this.setState({\n        ...fetchedMovie\n      });\n    } catch (err) {\n      throw err;\n    }\n  };\n\n  handleAuth = async type => {\n    try {\n      const user = await authTypes[type]();\n      this.setState({ isAuthorized: true, user });\n    } catch (err) {\n      throw err;\n    }\n  };\n\n  handleFindMovie = async () => {\n    this.setState({ loaded: false });\n    const movies = await fetchMovies();\n    const randomMovieId = Math.floor(Math.random() * movies.length);\n    const randomMovie = movies[randomMovieId];\n    const isFavorite = this.state.isAuthorized\n      ? await checkIsFav(randomMovie._id)\n      : false;\n    this.setState({\n      movie: {\n        ...randomMovie,\n        isFavorite\n      }\n    });\n    setTimeout(() => this.setState({ loaded: true }), 1300);\n    setTimeout(() => this.setState({ activeView: \"movie\" }), 2000);\n  };\n\n  likeHandler = async (movieId = null) => {\n    if (movieId) {\n      await handleLike(movieId);\n    } else {\n      await handleUnLike();\n    }\n    const { movie } = this.state;\n    this.setState({\n      movie: {\n        ...movie,\n        isFavorite: movieId ? true : false\n      }\n    });\n  };\n\n  render() {\n    const { loaded, activeView, isAuthorized, movie } = this.state;\n    return (\n      <Root activeView={activeView}>\n        <View header={false} activePanel=\"welcome_panel\" id=\"welcome\">\n          <Panel id=\"welcome_panel\">\n            <Home onFindMovie={this.handleFindMovie} loaded={loaded} />\n            {!isAuthorized && (\n              <Div className=\"auth-block\">\n                <Button\n                  size=\"l\"\n                  stretched\n                  aria-label=\"auth-button-instagram\"\n                  role=\"button\"\n                  mode=\"overlay_outline\"\n                  style={{ marginRight: 8 }}\n                  onClick={() => this.handleAuth(\"fb\")}\n                >\n                  <Icon24LogoInstagram color=\"#fff\" />\n                </Button>\n                <Button\n                  size=\"l\"\n                  stretched\n                  role=\"button\"\n                  aria-label=\"auth-button-google\"\n                  mode=\"overlay_outline\"\n                  onClick={() => this.handleAuth(\"google\")}\n                >\n                  <Icon24LogoGoogle />\n                </Button>\n              </Div>\n            )}\n          </Panel>\n        </View>\n        <View header={false} activePanel=\"movie_panel\" id=\"movie\">\n          <Panel id=\"movie_panel\" style={{ backgroundColor: \"#1e1b26\" }}>\n            {movie && (\n              <MovieCard\n                movie={movie}\n                goBack={() => this.setState({ activeView: \"welcome\" })}\n                showImage={showImage}\n                onLike={this.likeHandler}\n                onUnLike={this.likeHandler}\n                onMovieShare={onMovieShare}\n              />\n            )}\n          </Panel>\n        </View>\n      </Root>\n    );\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nconst isAuthorized = localStorage.getItem(\"userId\");\n\nReactDOM.render(\n  <App isAuthorized={isAuthorized} />,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}